{% extends 'base.html.twig' %}

{% block title %}Room
{% endblock %}

{% block body %}

	<header>
		Logo + nav
	</header>

	<div class="container">
		<div class="roomTitleContainer">
			{# Id #}
			{# {{ room.id }} #}

				{% for user in users %}
					{% if room.user.id == user.id %}
					<img class="roomTitleContainerProfilPicture" src="{{ user.pictureUser }}" alt="Photo de profil"> {{ user.pseudoUser }}
				{% endif %}
			{% endfor %}
			le
			{{ room.dateRoom ? room.dateRoom|date('d-m-Y') : '' }}

			{{ room.titleRoom }}

			<p>
				{{ room.contentRoom }}
			</p>
		</div>

		<a href="{{ path('app_forum') }}">
			Retourner sur le forum</a>

		<div class="chatContainer">
			{% for chat in chats %}
				{# Récupérer les commentaires et la date de la table Chat si l'id correspond #}
				{% if room.id == chat.room.id %}
					{# Récupérer le pseudo du user #}
					<div class="chatContainerMessage">
						{% for user in users %}
							{% if chat.user.id == user.id %}
								<p>
									<img class="chatContainerProfilPicture" src="{{ user.pictureUser }}" alt="Photo de profil">
									{{ user.pseudoUser }}
								{% endif %}
							{% endfor %}
							{{chat.date ? chat.date|date('d-m-Y : H:i') : '' }}
						</p>
						<p>
							{{chat.commentary}}
						</p>
					</div>
				{% endif %}
			{% endfor %}
		</div>

		<div class="container newMessage">
			{{ include('chat/new.html.twig') }}

		</div>

		{# <a href="{{ path('app_room_index') }}">back to list</a> #}
	{# <a href="{{ path('app_room_edit', {'id': room.id}) }}">edit</a> #}
		{# {{ include('room/_delete_form.html.twig') }} #}
	</div>
{% endblock %}
